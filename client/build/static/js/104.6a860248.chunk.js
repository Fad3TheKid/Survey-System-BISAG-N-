"use strict";(self.webpackChunkformflow_client=self.webpackChunkformflow_client||[]).push([[104],{1104:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});var r=l(5043),a=l(3216),s=l(4505),i=l(5865),n=l(6446),o=l(7348),d=l(1292),c=l(8492),u=l(8577),h=l(4256),m=l(9413),x=l(1962),p=l(9285),f=l(2143),A=l(2518),v=l(579);const y=()=>{const{formId:e}=(0,a.g)(),t=(0,a.Zp)(),[l,y]=(0,r.useState)(null),[j,b]=(0,r.useState)({}),[g,w]=(0,r.useState)(!0),[_,q]=(0,r.useState)(!1),[k,C]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const t=await s.mt.getForm(e);console.log("Fetched form data:",t),y(t)}catch(t){console.error("Failed to load form:",t),alert("Failed to load form: "+t)}finally{w(!1)}})();(async()=>{try{const e=await s.y1.getProfile();C(e.email||"")}catch(e){console.error("Failed to fetch user profile:",e)}})()}),[e]);const S=(e,t)=>{b((l=>({...l,[e]:t})))};return g?(0,v.jsx)(i.A,{children:"Loading form..."}):l?(0,v.jsxs)(n.A,{sx:{maxWidth:600,margin:"auto",padding:3},children:[(0,v.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:l.title}),(0,v.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:l.description}),l.questions.map((e=>{const t=j[e._id]||"";switch(e.type){case"short":case"email":case"number":case"phone":case"url":return(0,v.jsx)(n.A,{sx:{mb:3},children:(0,v.jsx)(o.A,{label:e.title,type:"short"===e.type?"text":e.type,value:t,onChange:t=>S(e._id,t.target.value),fullWidth:!0,required:e.required})},e._id);case"paragraph":return(0,v.jsx)(n.A,{sx:{mb:3},children:(0,v.jsx)(o.A,{label:e.title,multiline:!0,rows:4,value:t,onChange:t=>S(e._id,t.target.value),fullWidth:!0,required:e.required})},e._id);case"multiple":return(0,v.jsxs)(n.A,{sx:{mb:3},children:[(0,v.jsx)(d.A,{children:e.title}),(0,v.jsx)(c.A,{value:t,onChange:t=>S(e._id,t.target.value),children:e.options.map((t=>(0,v.jsx)(u.A,{value:t.value,control:(0,v.jsx)(h.A,{required:e.required}),label:t.text},t.value)))})]},e._id);case"checkbox":return(0,v.jsxs)(n.A,{sx:{mb:3},children:[(0,v.jsx)(d.A,{children:e.title}),(0,v.jsx)(m.A,{children:e.options.map((l=>(0,v.jsx)(u.A,{control:(0,v.jsx)(x.A,{checked:!!Array.isArray(t)&&t.includes(l.value),onChange:r=>{let a=Array.isArray(t)?[...t]:[];r.target.checked?a.push(l.value):a=a.filter((e=>e!==l.value)),S(e._id,a)}}),label:l.text},l.value)))})]},e._id);case"dropdown":return(0,v.jsxs)(n.A,{sx:{mb:3},children:[(0,v.jsx)(d.A,{children:e.title}),(0,v.jsx)(p.A,{value:t,onChange:t=>S(e._id,t.target.value),fullWidth:!0,required:e.required,children:e.options.map((e=>(0,v.jsx)(f.A,{value:e.value,children:e.text},e.value)))})]},e._id);default:return null}})),(0,v.jsx)(A.A,{variant:"contained",color:"primary",onClick:async()=>{q(!0);try{const r=l.questions.map((e=>({questionId:e._id,type:e.type,value:j[e._id]||"",timestamp:new Date}))),a={formId:e,answers:r,respondentEmail:k};await s.mt.submitResponse(a),alert("Response submitted successfully!"),t("/fill-surveys")}catch(r){alert("Failed to submit response: "+r)}finally{q(!1)}},disabled:_,children:_?"Submitting...":"Submit"}),(0,v.jsx)(A.A,{variant:"outlined",color:"secondary",sx:{ml:2},onClick:()=>{window.location.href="/fill-surveys"},children:"Back"})]}):(window.location.href="/employee-dashboard",null)}}}]);
//# sourceMappingURL=104.6a860248.chunk.js.map